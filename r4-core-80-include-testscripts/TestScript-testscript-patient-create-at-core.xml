<?xml version="1.0" encoding="UTF-8"?>

<TestScript xmlns="http://hl7.org/fhir">
  <id value="testscript-patient-create-at-core"/>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml"><p><b>Generated Narrative: TestScript</b><a name="testscript-patient-create-at-core"> </a></p><div style="display: inline-block; background-color: #d9e0e7; padding: 6px; margin: 4px; border: 1px solid #8da1b4; border-radius: 5px; line-height: 60%"><p style="margin-bottom: 0px">Resource TestScript &quot;testscript-patient-create-at-core&quot; </p></div><p><b>url</b>: <code>http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/TestScript/testscript-patient-create-at-core</code></p><p><b>version</b>: 1.1.0</p><p><b>name</b>: HL7® AT Core TestScript - Patient Create</p><p><b>title</b>: HL7® AT Core TestScript - Patient Create</p><p><b>status</b>: active</p><p><b>date</b>: 2023-02-21</p><p><b>publisher</b>: HL7® Austria</p><p><b>contact</b>: Technical Committee for FHIR® at HL7® Austria: <a href="mailto:mailto:tc-fhir@hl7.at">mailto:tc-fhir@hl7.at</a></p><p><b>description</b>: TestScript creating a patient resource conformant to the AT Core Patient profile on a FHIR Server. FHIR Client may use any input patient resource, but the script can provide an example patient: Andreas Bucher - HL7ATCorePatientExample04. Expected Result:  Server accepts creation of Patient resource that is conformant to the AT Core Patient profile.</p><p><b>copyright</b>: This FHIR Test Script is licensed under Creative Commons (CC0) 'No Rights Reserved'. Learn more at https://creativecommons.org/licenses</p><h3>Origins</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Index</b></td><td><b>Profile</b></td></tr><tr><td style="display: none">*</td><td>1</td><td>FHIR Client (Details: http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types code FHIR-Client = 'FHIR Client', stated as 'null')</td></tr></table><h3>Destinations</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Index</b></td><td><b>Profile</b></td></tr><tr><td style="display: none">*</td><td>1</td><td>FHIR Server (Details: http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types code FHIR-Server = 'FHIR Server', stated as 'null')</td></tr></table><blockquote><p><b>fixture</b></p><blockquote><p><b>id</b></p>patient-create</blockquote><p><b>autocreate</b>: false</p><p><b>autodelete</b>: false</p><p><b>resource</b>: <a href="Patient-HL7ATCorePatientCreateTestExample.html">Patient-HL7ATCorePatientCreateTestExample.html</a></p></blockquote><p><b>profile</b>: <a href="http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/StructureDefinition/at-core-patient">http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/StructureDefinition/at-core-patient</a> &quot;HL7ATCorePatient&quot;</p><h3>Variables</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Name</b></td><td><b>Path</b></td><td><b>SourceId</b></td></tr><tr><td style="display: none">*</td><td>patientResourceId</td><td>Patient/id</td><td>patient-create</td></tr></table><blockquote><p><b>test</b></p><blockquote><p><b>id</b></p>Step1-RegisterNewPatient</blockquote><p><b>name</b>: RegisterNewPatient</p><p><b>description</b>: Create a new patient conformant to the AT Core Patient profile, the server assigns the resource id using JSON.</p><blockquote><p><b>action</b></p><h3>Operations</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>ContentType</b></td><td><b>Destination</b></td><td><b>EncodeRequestUrl</b></td><td><b>Origin</b></td><td><b>ResponseId</b></td><td><b>SourceId</b></td></tr><tr><td style="display: none">*</td><td>Create (Details: http://terminology.hl7.org/CodeSystem/testscript-operation-codes code create = 'Create', stated as 'null')</td><td>Patient</td><td>Create patient with client assigned resource id.</td><td>json</td><td>json</td><td>1</td><td>true</td><td>1</td><td>create-response</td><td>patient-create</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>ValidateProfileId</b></td><td><b>WarningOnly</b></td></tr><tr><td style="display: none">*</td><td>Validate that the returned resource conforms to the base FHIR Patient profile.</td><td>request</td><td>at-core-patient-profile</td><td>false</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>Operator</b></td><td><b>ResponseCode</b></td><td><b>WarningOnly</b></td></tr><tr><td style="display: none">*</td><td>Confirm that the returned HTTP status is 200(OK) or 201(Created).</td><td>response</td><td>in</td><td>200,201</td><td>false</td></tr></table></blockquote></blockquote></div>
  </text>
  <url value="http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/TestScript/testscript-patient-create-at-core"/>
  <version value="1.1.0"/>
  <name value="HL7® AT Core TestScript - Patient Create"/>
  <title value="HL7® AT Core TestScript - Patient Create"/>
  <status value="active"/>
  <date value="2023-02-21"/>
  <publisher value="HL7® Austria"/>
  <contact>
    <name value="Technical Committee for FHIR® at HL7® Austria"/>
    <telecom>
      <system value="email"/>
      <value value="mailto:tc-fhir@hl7.at"/>
    </telecom>
  </contact>
  <description value="TestScript creating a patient resource conformant to the AT Core Patient profile on a FHIR Server. FHIR Client may use any input patient resource, but the script can provide an example patient: Andreas Bucher - HL7ATCorePatientExample04. Expected Result:  Server accepts creation of Patient resource that is conformant to the AT Core Patient profile."/>
  <copyright value="This FHIR Test Script is licensed under Creative Commons (CC0) 'No Rights Reserved'. Learn more at https://creativecommons.org/licenses"/>
  <origin>
    <index value="1"/>
    <profile>
      <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types"/>
      <code value="FHIR-Client"/>
    </profile>
  </origin>
  <destination>
    <index value="1"/>
    <profile>
      <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types"/>
      <code value="FHIR-Server"/>
    </profile>
  </destination>
  <fixture id="patient-create">
    <autocreate value="false"/>
    <autodelete value="false"/>
    <resource>
      <reference value="Patient-HL7ATCorePatientCreateTestExample.html"/>
    </resource>
  </fixture>
  <profile id="at-core-patient-profile">
    <reference value="http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/StructureDefinition/at-core-patient"/>
  </profile>
  <variable>
    <name value="patientResourceId"/>
    <path value="Patient/id"/>
    <sourceId value="patient-create"/>
  </variable>
  <test id="Step1-RegisterNewPatient">
    <name value="RegisterNewPatient"/>
    <description value="Create a new patient conformant to the AT Core Patient profile, the server assigns the resource id using JSON."/>
    <action>
      <operation>
        <type>
          <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
          <code value="create"/>
        </type>
        <resource value="Patient"/>
        <description value="Create patient with client assigned resource id."/>
        <accept value="json"/>
        <contentType value="json"/>
        <destination value="1"/>
        <encodeRequestUrl value="true"/>
        <origin value="1"/>
        <responseId value="create-response"/>
        <sourceId value="patient-create"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Validate that the returned resource conforms to the base FHIR Patient profile."/>
        <direction value="request"/>
        <validateProfileId value="at-core-patient-profile"/>
        <warningOnly value="false"/>
      </assert>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <direction value="response"/>
        <operator value="in"/>
        <responseCode value="200,201"/>
        <warningOnly value="false"/>
      </assert>
    </action>
  </test>
</TestScript>