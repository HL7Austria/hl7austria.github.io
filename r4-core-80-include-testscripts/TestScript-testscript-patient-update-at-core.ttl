@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/TestScript/testscript-patient-update-at-core> a fhir:TestScript ;
  fhir:nodeRole fhir:treeRoot ;
  fhir:id [ fhir:v "testscript-patient-update-at-core"] ; # 
  fhir:text [
     fhir:status [ fhir:v "generated" ] ;
     fhir:div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative: TestScript</b><a name=\"testscript-patient-update-at-core\"> </a></p><div style=\"display: inline-block; background-color: #d9e0e7; padding: 6px; margin: 4px; border: 1px solid #8da1b4; border-radius: 5px; line-height: 60%\"><p style=\"margin-bottom: 0px\">Resource TestScript &quot;testscript-patient-update-at-core&quot; </p></div><p><b>url</b>: <code>http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/TestScript/testscript-patient-update-at-core</code></p><p><b>version</b>: 1.1.0</p><p><b>name</b>: HL7® AT Core TestScript - Patient Update</p><p><b>title</b>: HL7® AT Core TestScript - Patient Update</p><p><b>status</b>: active</p><p><b>date</b>: 2023-02-21</p><p><b>publisher</b>: HL7® Austria</p><p><b>contact</b>: Technical Committee for FHIR® at HL7® Austria: <a href=\"mailto:mailto:tc-fhir@hl7.at\">mailto:tc-fhir@hl7.at</a></p><p><b>description</b>: TestScript updating an existing patient resource conformant to the AT Core Patient profile on a FHIR Server using the JSON format. FHIR Client may use any input patient resource, but the script can provide an example patient: Andreas Bucher - HL7ATCorePatientExample04 with an updated PI value of “11-22-33-44”. Expected Result:  Server accepts update of Patient resource that is conformant to the AT Core Patient profile. The testscript uses a variable for the resource ID value which should match the Id of the resource being updated.</p><p><b>copyright</b>: This FHIR Test Script is licensed under Creative Commons (CC0) 'No Rights Reserved'. Learn more at https://creativecommons.org/licenses</p><h3>Origins</h3><table class=\"grid\"><tr><td style=\"display: none\">-</td><td><b>Index</b></td><td><b>Profile</b></td></tr><tr><td style=\"display: none\">*</td><td>1</td><td>FHIR Client (Details: http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types code FHIR-Client = 'FHIR Client', stated as 'null')</td></tr></table><h3>Destinations</h3><table class=\"grid\"><tr><td style=\"display: none\">-</td><td><b>Index</b></td><td><b>Profile</b></td></tr><tr><td style=\"display: none\">*</td><td>1</td><td>FHIR Server (Details: http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types code FHIR-Server = 'FHIR Server', stated as 'null')</td></tr></table><blockquote><p><b>fixture</b></p><blockquote><p><b>id</b></p>patient-update</blockquote><p><b>autocreate</b>: false</p><p><b>autodelete</b>: false</p><p><b>resource</b>: <a href=\"Patient-HL7ATCorePatientUpdateTestExample.html\">Patient-HL7ATCorePatientUpdateTestExample.html</a></p></blockquote><p><b>profile</b>: <a href=\"http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/StructureDefinition/at-core-patient\">http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/StructureDefinition/at-core-patient</a> &quot;HL7ATCorePatient&quot;</p><h3>Variables</h3><table class=\"grid\"><tr><td style=\"display: none\">-</td><td><b>Name</b></td><td><b>Description</b></td><td><b>Hint</b></td></tr><tr><td style=\"display: none\">*</td><td>patientResourceId</td><td>Enter the patient FHIR resource id the FHIR Client will send to the FHIR Server.</td><td>[Resource Id]</td></tr></table><blockquote><p><b>test</b></p><blockquote><p><b>id</b></p>Step1-UpdatePatient</blockquote><p><b>name</b>: UpdatePatient</p><p><b>description</b>: Update a patient resource conformant to the AT Core Patient profile.</p><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td style=\"display: none\">-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>ContentType</b></td><td><b>Destination</b></td><td><b>EncodeRequestUrl</b></td><td><b>Origin</b></td><td><b>Params</b></td><td><b>ResponseId</b></td><td><b>SourceId</b></td></tr><tr><td style=\"display: none\">*</td><td>Update (Details: http://terminology.hl7.org/CodeSystem/testscript-operation-codes code update = 'Update', stated as 'null')</td><td>Patient</td><td>Update patient resource.</td><td>json</td><td>json</td><td>1</td><td>true</td><td>1</td><td>/${patientResourceId}</td><td>create-response</td><td>patient-update</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td style=\"display: none\">-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>ValidateProfileId</b></td><td><b>WarningOnly</b></td></tr><tr><td style=\"display: none\">*</td><td>Validate that the returned resource conforms to the base FHIR Patient profile.</td><td>request</td><td>at-core-patient-profile</td><td>false</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td style=\"display: none\">-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>Operator</b></td><td><b>ResponseCode</b></td><td><b>WarningOnly</b></td></tr><tr><td style=\"display: none\">*</td><td>Confirm that the returned HTTP status is 200(OK).</td><td>response</td><td>equals</td><td>200</td><td>false</td></tr></table></blockquote></blockquote></div>"
  ] ; # 
  fhir:url [ fhir:v "http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/TestScript/testscript-patient-update-at-core"^^xsd:anyURI] ; # 
  fhir:version [ fhir:v "1.1.0"] ; # 
  fhir:name [ fhir:v "HL7® AT Core TestScript - Patient Update"] ; # 
  fhir:title [ fhir:v "HL7® AT Core TestScript - Patient Update"] ; # 
  fhir:status [ fhir:v "active"] ; # 
  fhir:date [ fhir:v "2023-02-21"^^xsd:date] ; # 
  fhir:publisher [ fhir:v "HL7® Austria"] ; # 
  fhir:contact ( [
     fhir:name [ fhir:v "Technical Committee for FHIR® at HL7® Austria" ] ;
     fhir:telecom ( [
       fhir:system [ fhir:v "email" ] ;
       fhir:value [ fhir:v "mailto:tc-fhir@hl7.at" ]
     ] )
  ] ) ; # 
  fhir:description [ fhir:v "TestScript updating an existing patient resource conformant to the AT Core Patient profile on a FHIR Server using the JSON format. FHIR Client may use any input patient resource, but the script can provide an example patient: Andreas Bucher - HL7ATCorePatientExample04 with an updated PI value of “11-22-33-44”. Expected Result:  Server accepts update of Patient resource that is conformant to the AT Core Patient profile. The testscript uses a variable for the resource ID value which should match the Id of the resource being updated."] ; # 
  fhir:copyright [ fhir:v "This FHIR Test Script is licensed under Creative Commons (CC0) 'No Rights Reserved'. Learn more at https://creativecommons.org/licenses"] ; # 
  fhir:origin ( [
     fhir:index [ fhir:v "1"^^xsd:integer ] ;
     fhir:profile [
       fhir:system [ fhir:v "http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "FHIR-Client" ]
     ]
  ] ) ; # 
  fhir:destination ( [
     fhir:index [ fhir:v "1"^^xsd:integer ] ;
     fhir:profile [
       fhir:system [ fhir:v "http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "FHIR-Server" ]
     ]
  ] ) ; # 
  fhir:fixture ( [
     fhir:id [ fhir:v "patient-update" ] ;
     fhir:autocreate [ fhir:v "false"^^xsd:boolean ] ;
     fhir:autodelete [ fhir:v "false"^^xsd:boolean ] ;
     fhir:resource [
       fhir:reference [ fhir:v "Patient-HL7ATCorePatientUpdateTestExample.html" ]
     ]
  ] ) ; # 
  fhir:profile ( [
     fhir:link <http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/StructureDefinition/at-core-patient> ;
     fhir:id [ fhir:v "at-core-patient-profile" ] ;
     fhir:reference [ fhir:v "http://hl7.at/fhir/HL7ATCoreProfiles/4.0.1/StructureDefinition/at-core-patient" ]
  ] ) ; # 
  fhir:variable ( [
     fhir:name [ fhir:v "patientResourceId" ] ;
     fhir:description [ fhir:v "Enter the patient FHIR resource id the FHIR Client will send to the FHIR Server." ] ;
     fhir:hint [ fhir:v "[Resource Id]" ]
  ] ) ; # 
  fhir:test ( [
     fhir:id [ fhir:v "Step1-UpdatePatient" ] ;
     fhir:name [ fhir:v "UpdatePatient" ] ;
     fhir:description [ fhir:v "Update a patient resource conformant to the AT Core Patient profile." ] ;
     fhir:action ( [
       fhir:operation [
         fhir:type [
           fhir:system [ fhir:v "http://terminology.hl7.org/CodeSystem/testscript-operation-codes"^^xsd:anyURI ] ;
           fhir:code [ fhir:v "update" ]
         ] ;
         fhir:resource [ fhir:v "Patient" ] ;
         fhir:description [ fhir:v "Update patient resource." ] ;
         fhir:accept [ fhir:v "json" ] ;
         fhir:contentType [ fhir:v "json" ] ;
         fhir:destination [ fhir:v "1"^^xsd:integer ] ;
         fhir:encodeRequestUrl [ fhir:v "true"^^xsd:boolean ] ;
         fhir:origin [ fhir:v "1"^^xsd:integer ] ;
         fhir:params [ fhir:v "/${patientResourceId}" ] ;
         fhir:responseId [ fhir:v "create-response" ] ;
         fhir:sourceId [ fhir:v "patient-update" ]
       ]
     ] [
       fhir:assert [
         fhir:description [ fhir:v "Validate that the returned resource conforms to the base FHIR Patient profile." ] ;
         fhir:direction [ fhir:v "request" ] ;
         fhir:validateProfileId [ fhir:v "at-core-patient-profile" ] ;
         fhir:warningOnly [ fhir:v "false"^^xsd:boolean ]
       ]
     ] [
       fhir:assert [
         fhir:description [ fhir:v "Confirm that the returned HTTP status is 200(OK)." ] ;
         fhir:direction [ fhir:v "response" ] ;
         fhir:operator [ fhir:v "equals" ] ;
         fhir:responseCode [ fhir:v "200" ] ;
         fhir:warningOnly [ fhir:v "false"^^xsd:boolean ]
       ]
     ] )
  ] ) . # 

# -------------------------------------------------------------------------------------

